<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="google-site-verification" content="JlYgOqZ2QujgNAgY4yUni1otZAxr7-SP9D3h50IYo0I"><title>How to install Interception Tools on Pop!_OS - Hojjat&#x27;s Blog</title><meta name="description" content="Installing Interception Tools on Ubuntu 
Swapping CapsLock and Esc key in Linux"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://hojjatabdollahi.github.io/how-to-install-interception-tools-on-pop_os.html"><link rel="alternate" type="application/atom+xml" href="https://hojjatabdollahi.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://hojjatabdollahi.github.io/feed.json"><meta property="og:title" content="How to install Interception Tools on Pop!_OS"><meta property="og:image" content="https://hojjatabdollahi.github.io/media/website/1-1VP7np2H17ecc1j8roHGvQ.jpeg"><meta property="og:site_name" content="Hojjat's Blog"><meta property="og:description" content="Installing Interception Tools on Ubuntu 
Swapping CapsLock and Esc key in Linux"><meta property="og:url" content="https://hojjatabdollahi.github.io/how-to-install-interception-tools-on-pop_os.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Roboto:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>h1,h2,h3,h4,h5,h6,.btn,[type=button],[type=submit],button,.navbar .navbar__menu li,.navbar_mobile_sidebar .navbar__menu li,.feed__author,.post__tag,.post__share>a span,.post__nav-link>span,.footer{font-family:'Roboto',sans-serif}body,blockquote,.search__input,.author__name,.author__info>p,.post__nav-link{font-family:'Open Sans',sans-serif}</style><link rel="stylesheet" href="https://hojjatabdollahi.github.io/assets/css/style.css?v=cc87cb8806c844f0646558fe70d5c5d1"><link rel="stylesheet" href="https://hojjatabdollahi.github.io/assets/css/prism.css?v=d32345b346e3a0e14777d298004b804b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://hojjatabdollahi.github.io/how-to-install-interception-tools-on-pop_os.html"},"headline":"How to install Interception Tools on Pop!_OS","datePublished":"2021-01-05T13:53","dateModified":"2021-01-05T13:57","image":{"@type":"ImageObject","url":"https://hojjatabdollahi.github.io/media/website/1-1VP7np2H17ecc1j8roHGvQ.jpeg","height":255,"width":256},"description":"Interception ToolsWhat is Interception Tools?It's a software that lives between the kernel and the X server. It processes the input events and can modify it. You can modify the keyboard layout, or make the keyboard act like a mouse, or... Pressing Esc is hard. Pressing&hellip;","author":{"@type":"Person","name":"Hojjat"},"publisher":{"@type":"Organization","name":"Hojjat","logo":{"@type":"ImageObject","url":"https://hojjatabdollahi.github.io/media/website/1-1VP7np2H17ecc1j8roHGvQ.jpeg","height":255,"width":256}}}</script><script src="https://hojjatabdollahi.github.io/assets/js/ls.parent-fit.min.js?v=f8467455ea5c88e3e51a4f212d2632bd"></script><script async src="https://hojjatabdollahi.github.io/assets/js/lazysizes.min.js?v=6a69d476c93de2b78a72acb259abccea"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167185299-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167185299-1');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://hojjatabdollahi.github.io/"><img src="https://hojjatabdollahi.github.io/media/website/1-1VP7np2H17ecc1j8roHGvQ.jpeg" alt="Hojjat&#x27;s Blog"></a><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://hojjatabdollahi.github.io/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://hojjatabdollahi.github.io/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-01-05T13:53">January 5, 2021</time></div><h1>How to install Interception Tools on Pop!_OS</h1><div class="post__meta post__meta--author"><a href="https://hojjatabdollahi.github.io/authors/hojjat/" class="feed__author invert">Hojjat</a></div></div></header></div><div class="wrapper post__entry"><h2>Interception Tools</h2><h3>What is Interception Tools?</h3><p>It's a software that lives between the kernel and the X server. It processes the input events and can modify it.</p><h3>Why is it useful?</h3><p>You can modify the keyboard layout, or make the keyboard act like a mouse, or...</p><h3>Why did I get interested in it?</h3><p>Pressing Esc is hard. Pressing ctrl is hard. I use vim. </p><h3>Why did I write this post? </h3><p>Because I'm sure I will be coming back to this and the main developers apparently hate Ubuntu!</p><h2>Installation</h2><p><code class="language-bash">sudo apt install libudev-dev libyaml-cpp-dev libevdev-dev cmake</code></p><p>I also needed to install the boost libraries:</p><p><code class="language-bash">sudo apt install libboost-all-dev</code></p><p>Now, clone the Interception Tools repo, compile and install it:</p><pre><code class="language-bash">git clone <a href="https://gitlab.com/interception/linux/tools">https://gitlab.com/interception/linux/tools</a></code><br><code class="language-bash">cd tools</code><br><code class="language-bash">mkdir build</code><br><code class="language-bash">cd build</code><br><code class="language-bash">cmake ..</code><br><code class="language-bash">make </code><br><code class="language-bash">sudo make install</code></pre><p>Now, install the Capslock to Escape plugin for it:</p><pre><code class="language-bash">git clone https://gitlab.com/interception/linux/plugins/caps2esc</code><br><code class="language-bash">cd caps2esc</code><br><code class="language-bash">mkdir build</code><br><code class="language-bash">cd build</code><br><code class="language-bash">cmake ..</code><br><code class="language-bash">make </code><br><code class="language-bash">sudo make install</code></pre><p>Now, we need to configure Interception Tools to use the caps2esc plugin:</p><pre><code class="language-bash">sudo mkdir -p /etc/interception/udevmon.d/</code><br><code class="language-bash">sudo vim /etc/interception/udevmon.d/c2e.yaml</code></pre><p>And copy the following in it:</p><pre>- JOB: intercept -g $DEVNODE | caps2esc | uinput -d $DEVNODE<br>  DEVICE:<br>    LINK: /dev/input/by-id/usb-Cooler_Master_Technology_Inc._MasterKeys_S-event-kbd</pre><p>In this case I am referring to my exact keyboard. You can find your keyboard using:</p><p><code class="language-bash">ls /dev/input/by-id | grep kbd</code></p><p>That being said, it is probably possible to use a more general config like this:</p><pre>- JOB: "intercept -g $DEVNODE | caps2esc | uinput -d $DEVNODE"<br>  DEVICE:<br>    EVENTS:<br>      EV_KEY: [KEY_CAPSLOCK, KEY_ESC]</pre><p>Now that the configuration is done we need to add udevmon to the services so that it starts with the system.</p><p>Open this file:</p><p><code class="language-bash">sudo vim /etc/systemd/system/udevmon.service</code></p><p>and copy the following in it:</p><pre>[Unit]<br>Description=udevmon<br>Wants=systemd-udev-settle.service<br>After=systemd-udev-settle.service<br><br>[Service]<br>ExecStart=/usr/bin/nice -n -20 /usr/local/bin/udevmon <br><br>[Install]<br>WantedBy=multi-user.targetWantedBy=multi-user.target</pre><p>Make sure that the address for `udevmon` is correct:</p><p><code class="language-bash">which udevmon</code></p><h2>Usage</h2><p>After a reboot, the Esc key acts like CapsLock key. And the CapsLock key acts like both the Esc key and the Ctrl key. If you tap the CapsLock key, it will register as Esc, and if you hold it down and press another key it will register it as Ctrl and perform a combination. So, for example CapsLock+C will copy, but tapping the CapsLock key, will be just an Esc event.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on January 5, 2021</p><ul class="post__tag"><li><a href="https://hojjatabdollahi.github.io/linux/">linux</a></li><li><a href="https://hojjatabdollahi.github.io/sh/">sh</a></li></ul><div class="post__share"></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://hojjatabdollahi.github.io/authors/hojjat/" class="invert" rel="author">Hojjat</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://hojjatabdollahi.github.io/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://hojjatabdollahi.github.io/rust-ref-deref-clone.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Rust: Ref, Deref, Clone</a></div></div></nav><div class="post__comments"><div class="wrapper"><h2 class="h5">Comments</h2><div id="disqus_thread"></div><script>var disqus_config = function () {
                       this.page.url = 'https://hojjatabdollahi.github.io/how-to-install-interception-tools-on-pop_os.html';
               		this.page.identifier = '20';
                       this.page.title = ' How to install Interception Tools on Pop!_OS';
                   };
               
                   var disqus_loaded = false;
               
                   function publiiLoadDisqus() {
                       if(disqus_loaded) {
                           return false;
                       }
               
                       var top = document.getElementById('disqus_thread').offsetTop;
               
                       if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                           disqus_loaded = true;
               
                           (function () {
                               var d = document, s = d.createElement('script');
                               s.src = 'https://hojjata.disqus.com/embed.js';
                               s.setAttribute('data-timestamp', +new Date());
                               (d.head || d.body).appendChild(s);
                           })();
                       }
                   }
               
                   publiiLoadDisqus();
               
                   window.onscroll = function() {
                       publiiLoadDisqus();
                   };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="nofollow noopener noreferrer">comments powered by Disqus.</a></noscript></div></div></main><footer class="footer"><div class="footer__copyright">Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener noreferrer">Publii Static CMS</a></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://hojjatabdollahi.github.io/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://hojjatabdollahi.github.io/assets/js/scripts.min.js?v=205f40927e4a45297a0b266e50ad78d5"></script><script defer="defer" src="https://hojjatabdollahi.github.io/assets/js/prism.js?v=d581dee7f6d6df406d3a6fff31ad7f3b"></script><script>var lazyFeaturedImage=function lazyFeaturedImage(){var b=document.querySelectorAll(".hero__image-img");for(var a=0;a<b.length;a++){var c=b[a];c.addEventListener("lazyloaded",function(f){var d=f.target.parentNode;d.classList.add("hero__image--overlay")})}};lazyFeaturedImage();</script></body></html>